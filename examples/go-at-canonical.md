+++
title = "Go at Canonical"
date = 2014-05-08T16:12:00Z
updated = 2014-05-08T16:12:41Z
draft = true
blogimport = true 
type = "post"
[author]
	name = "Nate Finch"
	uri = "https://plus.google.com/115818189328363361527"
+++

A lot of people have asked on the <a href="https://plus.google.com/u/0/communities/103337146295481792015" target="_blank">Go Boston</a> G+ group for a talk about what it's like using Go full time as your day job. Short version: It's awesome.<br /><br />I started at Canonical nine months ago on the core <a href="http://juju.ubuntu.com/" target="_blank">Juju</a> team. Juju is a cloud orchestration tool written in Go. &nbsp;Cloud orchestration is a layer above things like docker, puppet, chef, etc - you use those tools to create a repeatable deployment of a service to a single machine. &nbsp;Juju's job is to spin up machines in the cloud, use packaged versions of those deployment scripts, and then relate the services together so you have your web service behind haproxy and talking to the database which is sharded across machines... all with just a few clicks in a GUI or a few commands in a terminal.<br /><br />Juju is a perfect fit for the Go language. The Juju CLI client is a Go command line application that reads local configuration and can spin up a machine in the cloud provider of your choice. That machine then runs the jujud Go application plus a Mongo database to store state. Optionally you can spin up more copies of the Juju server to ensure high availability. &nbsp;The client can then tell the Juju server to deploy services, which causes it to spin up more machines in the cloud, deploy a couple more Go applications to those machines, and those pull down the scripts to deploy the service asked for by the user.<br /><br />Juju can do this on AWS, Azure, HP Cloud, Joyent, Openstack, MaaS, Digital Ocean, or even to individual machines you control (VPS in the cloud, server in the closet, etc). <br /><br />Phew.<br /><br /><div>The entire Juju codebase is over 240,000 lines of Go code, including tests and external packages written and used primarily by Canonical (though with contributions from partners).<br /><br />All this code builds in approximately 7.5 seconds on my Haswell Quad Core i7 laptop w/ SSD.<br /><br />Juju is entirely open source, and engineers at Canonical have created some very highly regarded open source Go packages that are in use in many current Go projects. The mongo driver <a href="http://labix.org/mgo" target="_blank">mgo</a> and the enhanced testing framework <a href="http://labix.org/gocheck" target="_blank">gocheck</a> are two of the most popular to come out of our work on Juju, but we have also written <a href="https://github.com/juju/loggo" target="_blank">loggo</a>, an advanced logging package, and the newly added <a href="https://github.com/juju/errgo" target="_blank">errgo</a>, an error tracing package that gives you stacktrace-like detailed error messages. &nbsp;We've also written API wrappers for AWS, Azure, and Openstack, with external contributions giving us a wrapper for Joyent.<br /><br />Go's cross compilation has allowed us to easily produce native executables for the Juju client for Windows and OSX as well as Linux. The Juju server is a long running application that offers a websocket based API, stores data in mongodb, and starts up juju agents on each of the machines in your environment to deploy your services.</div><div><br /></div><div>Canonical was a diamond sponsor of <a href="http://www.gophercon.com/" target="_blank">GopherCon</a>, and many of our employees were there (sadly, I was not be one of them, due to family obligations and work travel planned for the week after). <br /><br />Several of our employees have a made a name for themselves in the Go community. &nbsp;Gustavo, above, wrote mgo, gocheck, did a lot of the initial juju developement, among many other great packages you can find on <a href="http://labix.org/" target="_blank">his website</a>. &nbsp;Dave Cheney is a contributor to the Go language itself, and has created innumerable Go packages and tools, such as the <a href="http://dave.cheney.net/2013/07/09/an-introduction-to-cross-compilation-with-go-1-1" target="_blank">definitive guide</a> to cross compilation in Go, and <a href="https://github.com/davecheney/autobench" target="_blank">a tool</a> for automatically comparing benchmarks using different versions of Go. &nbsp;Roger Peppe created <a href="https://launchpad.net/godeps" target="_blank">godeps</a>, a dependency management tool for Go projects (currently used by Juju), as well as <a href="https://code.google.com/p/rog-go/source/browse/exp/cmd/godef/" target="_blank">godef</a>, which is a tool used by several common editors for "go to definition" of Go symbols. &nbsp;Andrew Wilkins, is working on an LLVM compiler for go, called <a href="https://github.com/axw/llgo" target="_blank">llgo</a>. &nbsp;And of course many other talented Go developers you may or may not have heard of. &nbsp;And me.<br /><br />In order to support Juju on alternate platforms for some of our partners, Canonical has had Dave Cheney working on porting gcc-go to work on PowerPC 64 and ARM 64 (ARM V8).<br /><br />In addition to Juju, another Canonical project in Go is go-QML, producing QML support for Go. &nbsp;The impetus for this is giving developers of applications for Ubuntu touch a nice way to write QML apps, but it works just as well for writing rich GUI applications on Windows, OSX, and Linux.<br /><br /><br /></div>
